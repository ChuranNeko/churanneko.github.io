---
import { giscusConfig } from "../../config";

const { enable, repo, repoId, category, categoryId, mapping, strict, reactionsEnabled, emitMetadata, inputPosition, theme, lang } = giscusConfig;
---

{enable && (
    <div class="giscus-container mt-8 mb-8">
        <script src="https://giscus.app/client.js"
                data-repo={repo}
                data-repo-id={repoId}
                data-category={category}
                data-category-id={categoryId}
                data-mapping={mapping}
                data-strict={strict}
                data-reactions-enabled={reactionsEnabled}
                data-emit-metadata={emitMetadata}
                data-input-position={inputPosition}
                data-theme={theme}
                data-lang={lang}
                crossorigin="anonymous"
                async>
        </script>
    </div>
)}

<style>
    .giscus-container {
        border-radius: var(--radius-large);
        overflow: hidden;
    }
    
    /* Giscus 主题适配 */
    :global(html.dark) .giscus-container {
        background-color: var(--card-bg);
    }
    
    :global(.giscus-frame) {
        border-radius: var(--radius-large);
    }
</style>